# fcall

R package for parsing Farm Credit Administration (“FCA”) Call Report
data into [tidy](https://tidyr.tidyverse.org/articles/tidy-data.html) R
data frames.

  

![Example Plot of FCA Call Report
Data](reference/figures/fcall-example-plot.png)

## Installation

You can install {fcall} from [GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("ketchbrookanalytics/fcall")
```

## Background

FCA publishes Call Report data on a quarterly basis at
<https://www.fca.gov/bank-oversight/call-report-data-for-download>.

As of September 2023, this data represents a set of 72 *.TXT* files.
These files represent 36 datasets. The files prefixed with “D\_” contain
*metadata* (the column names, data types, etc.) of the associated file
containing the raw, header-less comma-separated data. For example, the
file that starts with *“D_INST”* contains the metadata for the file that
starts with *“INST\_”*.

Further, some of these datasets are structured in a way that makes data
analysis difficult. In these cases, we chose to pivot the data to make
it more analysis-friendly. See [Metadata File
Scenarios](#metadata-file-scenarios) for a more in-depth discussion of
when and how this pivoting took place.

This package provides 3 utility functions:

1.  [`download_data()`](https://ketchbrookanalytics.github.io/fcall/reference/download_data.md)
    allows users to programmatically download (and unzip) data from a
    specific quarter
2.  [`process_data()`](https://ketchbrookanalytics.github.io/fcall/reference/process_data.md)
    parses the data from these unzipped *.TXT* files into a list of R
    data frames containing the Call Report data and file metadata
3.  [`compare_metadata()`](https://ketchbrookanalytics.github.io/fcall/reference/compare_metadata.md)
    compares two sets of Call Report data from different quarters

Check out the [Getting
Started](https://ketchbrookanalytics.github.io/fcall/articles/getting-started.html)
vignette to learn more about these three core functions.

## Database

[Ketchbrook Analytics](https://www.ketchbrookanalytics.com/) has also
created a PostgreSQL database to store historical FCA Call Report data
in a traditional, relational schema that aligns with the output data
frame structure resulting from running
[`process_data()`](https://ketchbrookanalytics.github.io/fcall/reference/process_data.md).
This database allows users to execute SQL queries to easily analyze Call
Report data across multiple quarters.

Please reach out to
[info@ketchbrookanalytics.com](mailto:info@ketchbrookanalytics.com?subject=FCA%20Call%20Report%20Database)
if you would like access to this database.

#### Database Users

[![AgWest Farm
Credit](reference/figures/agwest_logo.png)](https://agwestfc.com)

[![GreenStone Farm Credit
Services](reference/figures/greenstone_logo.jpg)](https://www.greenstonefcs.com/)

[![High Plains Farm
Credit](reference/figures/highplains_logo.png)](https://highplainsfarmcredit.com/)

[![CoBank](reference/figures/cobank_logo.jpg)](https://www.cobank.com/)

[![Farm Credit
Illinois](reference/figures/fci_logo.jpg)](https://www.farmcreditil.com/)

[![Golden State Farm
Credit](reference/figures/golden_state_logo.png)](https://goldenstatefarmcredit.com/)

[![Horizon Farm
Credit](reference/figures/horizon_logo.png)](https://www.horizonfc.com/)

[![Capital Farm
Credit](reference/figures/capital_logo.png)](https://www.capitalfarmcredit.com/)

[![Farm Credit of Western
Oklahoma](reference/figures/western_oklahoma_logo.png)](https://www.farmcreditloans.com/)

[![AgTexas Farm Credit
Services](reference/figures/agtexas_logo.png)](https://agtexas.com/)

# Package index

## Primary Call Report Data Processing

Primary functions for downloading & parsing Call Report data

- [`download_data()`](https://ketchbrookanalytics.github.io/fcall/reference/download_data.md)
  : Download data from FCA website
- [`process_data()`](https://ketchbrookanalytics.github.io/fcall/reference/process_data.md)
  : Process FCA Call Report data in a specified folder
- [`compare_metadata()`](https://ketchbrookanalytics.github.io/fcall/reference/compare_metadata.md)
  : Compare FCA Call Report metadata files between two folders

## Secondary Call Report Data Processing

Secondary functions for downloading & parsing Call Report data

- [`compare_files_content()`](https://ketchbrookanalytics.github.io/fcall/reference/compare_files_content.md)
  : Compare content of a specific file between two folders
- [`get_codes_dict()`](https://ketchbrookanalytics.github.io/fcall/reference/get_codes_dict.md)
  : Retrieve dictionary of lookup codes for a specified dataset name
- [`process_data_file()`](https://ketchbrookanalytics.github.io/fcall/reference/process_data_file.md)
  : Process a data file using metadata and codes dictionary
- [`process_metadata_file()`](https://ketchbrookanalytics.github.io/fcall/reference/process_metadata_file.md)
  : Process metadata file to extract variable information
- [`read_data_file()`](https://ketchbrookanalytics.github.io/fcall/reference/read_data_file.md)
  : Read a data file based on metadata and codes dictionary

## Package Datasets

Lookup Table Dictionaries for Interpreting Codes

- [`RCB__INV_CODE`](https://ketchbrookanalytics.github.io/fcall/reference/RCB__INV_CODE.md)
  : Dictionary for INV_CODE variable of RCB file
- [`RCB2__AssetCodeRCB2`](https://ketchbrookanalytics.github.io/fcall/reference/RCB2__AssetCodeRCB2.md)
  : Dictionary for AssetCodeRCB2 variable of RCB2 file
- [`RCB3__DebtMaturityCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCB3__DebtMaturityCode.md)
  : Dictionary for DebtMaturityCode variable of RCB3 file
- [`RCF__LOANSTATUS`](https://ketchbrookanalytics.github.io/fcall/reference/RCF__LOANSTATUS.md)
  : Dictionary for LOANSTATUS variable of RCF file
- [`RCF1__LOANSTATUS`](https://ketchbrookanalytics.github.io/fcall/reference/RCF1__LOANSTATUS.md)
  : Dictionary for LOANSTATUS variable of RCF1 file
- [`RCI2B__DerivCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCI2B__DerivCode.md)
  : Dictionary for DerivCode variable of RCI2B file
- [`RCI2C__ExposureCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCI2C__ExposureCode.md)
  : Dictionary for ExposureCode variable of RCI2C file
- [`RCI2D__DerivRMCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCI2D__DerivRMCode.md)
  : Dictionary for DerivRMCode variable of RCI2D file
- [`RCO__ASSET_CODE`](https://ketchbrookanalytics.github.io/fcall/reference/RCO__ASSET_CODE.md)
  : Dictionary for ASSET_CODE variable of RCO file
- [`RCR3__RegCapCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCR3__RegCapCode.md)
  : Dictionary for RegCapCode variable of RCR3 file
- [`RCR7__RegCapCode`](https://ketchbrookanalytics.github.io/fcall/reference/RCR7__RegCapCode.md)
  : Dictionary for RegCapCode variable of RCR7 file
- [`RID__CAP_CODE`](https://ketchbrookanalytics.github.io/fcall/reference/RID__CAP_CODE.md)
  : Dictionary for RegCapCode variable of RID file
- [`RIE1__ACLCode`](https://ketchbrookanalytics.github.io/fcall/reference/RIE1__ACLCode.md)
  : Dictionary for ACLCode variable of RIE1 file
- [`file_metadata`](https://ketchbrookanalytics.github.io/fcall/reference/file_metadata.md)
  : Descriptions for data files

# Articles

### All vignettes

- [Data
  Structure](https://ketchbrookanalytics.github.io/fcall/articles/data-structure.md):
- [Database](https://ketchbrookanalytics.github.io/fcall/articles/database.md):
- [Getting
  Started](https://ketchbrookanalytics.github.io/fcall/articles/getting-started.md):
